<div class="expenses-container fade-in">
  <div class="list-header">
    <div class="header-left">
      <button class="btn-back" routerLink="/dashboard">
        <i class="bi bi-arrow-left"></i> Dashboard
      </button>
      <h1>
        <i class="bi bi-wallet2"></i> Mis Gastos
      </h1>
    </div>
    <button class="btn btn-primary" routerLink="/create-expense">
      <i class="bi bi-plus-circle"></i> Nuevo Gasto
    </button>
  </div>

  <div *ngIf="expenses().length || selectedCategoryId()" class="filters-section">
    <div class="filter-group">
      <label for="categoryFilter" class="filter-label">
        <i class="bi bi-funnel"></i> Filtrar por categoría:
      </label>
      <select 
        id="categoryFilter"
        class="form-select category-select" 
        [value]="selectedCategoryId()"
        (change)="onCategoryChange($any($event.target).value)">
        <option value="">Todas las categorías</option>
        <option *ngFor="let category of categories()" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
    </div>

    <div class="sort-controls" *ngIf="expenses().length">
      <span class="sort-label">Ordenar por:</span>
      <button 
        class="btn-sort"
        [class.active]="sortBy() === 'date'"
        (click)="sortByDate()">
        <i class="bi bi-calendar"></i> Fecha
        <i class="bi bi-arrow-down" *ngIf="sortBy() === 'date'"></i>
      </button>
      <button 
        class="btn-sort"
        [class.active]="sortBy() === 'amount'"
        (click)="sortByAmount()">
        <i class="bi bi-cash"></i> Precio
        <i class="bi bi-arrow-down" *ngIf="sortBy() === 'amount'"></i>
      </button>
    </div>
  </div>

  <div *ngIf="expenses().length; else noExpenses" class="expenses-grid">
    <div *ngFor="let expense of expenses()" class="expense-card">
      <div class="expense-header">
        <h3>{{ expense.description }}</h3>
        <span class="expense-badge">${{ expense.amount }}</span>
      </div>
      <div class="expense-footer">
        <span class="expense-date">
          <i class="bi bi-calendar"></i> {{ expense.date | date:'dd/MM/yyyy' }}
        </span>
      </div>
    </div>
  </div>
  
  <ng-template #noExpenses>
    <div class="empty-state">
      <i class="bi bi-inbox"></i>
      <h3>No hay gastos registrados</h3>
      <p>Comienza añadiendo tu primer gasto</p>
      <button class="btn btn-primary" routerLink="/create-expense">
        <i class="bi bi-plus-circle"></i> Crear Gasto
      </button>
    </div>
  </ng-template>
</div>